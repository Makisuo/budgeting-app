[
  {
    "sql": [
      "CREATE TYPE \"public\".\"account_type\" AS ENUM('depository', 'credit', 'other_asset', 'loan', 'other_liability');",
      "\nCREATE TYPE \"public\".\"subscription_frequency\" AS ENUM('monthly', 'yearly', 'weekly');",
      "\nCREATE TYPE \"public\".\"subscription_status\" AS ENUM('active', 'canceled', 'expired');",
      "\nCREATE TYPE \"public\".\"transaction_status\" AS ENUM('posted', 'pending');",
      "\nCREATE TABLE \"accounts\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"currency\" text NOT NULL,\n\t\"type\" \"account_type\" NOT NULL,\n\t\"institution_id\" text NOT NULL,\n\t\"balance_amount\" double precision NOT NULL,\n\t\"balance_currency\" text NOT NULL,\n\t\"tenant_id\" text NOT NULL,\n\t\"last_sync\" timestamp (3),\n\t\"created_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"updated_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"deleted_at\" timestamp (3)\n);\n",
      "\nCREATE TABLE \"companies\" (\n\t\"id\" serial PRIMARY KEY NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"asset_type\" text NOT NULL,\n\t\"asset_id\" text NOT NULL,\n\t\"patterns\" jsonb NOT NULL,\n\tCONSTRAINT \"companies_assetId_unique\" UNIQUE(\"asset_id\")\n);\n",
      "\nCREATE TABLE \"institutions\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"logo\" text,\n\t\"provider\" text NOT NULL,\n\t\"countries\" jsonb NOT NULL,\n\t\"transaction_total_days\" integer NOT NULL,\n\t\"created_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"updated_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"deleted_at\" timestamp (3)\n);\n",
      "\nCREATE TABLE \"requisitions\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"status\" text NOT NULL,\n\t\"reference_id\" text NOT NULL,\n\t\"institution_id\" text NOT NULL,\n\t\"tenant_id\" text NOT NULL,\n\t\"created_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"updated_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"deleted_at\" timestamp (3)\n);\n",
      "\nCREATE TABLE \"subscriptions\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"frequency\" \"subscription_frequency\" NOT NULL,\n\t\"status\" \"subscription_status\" NOT NULL,\n\t\"next_expected_payment\" timestamp (3),\n\t\"currency\" text NOT NULL,\n\t\"amount\" double precision NOT NULL,\n\t\"tenant_id\" text NOT NULL,\n\t\"created_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"updated_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"deleted_at\" timestamp (3)\n);\n",
      "\nCREATE TABLE \"transactions\" (\n\t\"id\" text PRIMARY KEY NOT NULL,\n\t\"amount\" double precision NOT NULL,\n\t\"currency\" text NOT NULL,\n\t\"date\" timestamp (3) NOT NULL,\n\t\"status\" \"transaction_status\" NOT NULL,\n\t\"balance\" double precision,\n\t\"category\" text,\n\t\"method\" text NOT NULL,\n\t\"name\" text NOT NULL,\n\t\"description\" text,\n\t\"currency_rate\" double precision,\n\t\"currency_source\" text,\n\t\"account_id\" text NOT NULL,\n\t\"company_id\" integer,\n\t\"tenant_id\" text NOT NULL,\n\t\"created_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"updated_at\" timestamp (3) DEFAULT CURRENT_TIMESTAMP NOT NULL,\n\t\"deleted_at\" timestamp (3)\n);\n",
      "\nCREATE INDEX \"patterns_idx\" ON \"companies\" USING gin (\"patterns\");",
      "\nCREATE INDEX \"name_index\" ON \"institutions\" USING btree (\"name\");",
      "\nCREATE INDEX \"name_country_index\" ON \"institutions\" USING btree (\"name\",\"countries\");"
    ],
    "bps": true,
    "folderMillis": 1734085283563,
    "hash": "68981d8753a0a2a01946375283cd19be2e87f2c5df75e84fded318ea636be9f4"
  },
  {
    "sql": [
      "ALTER TABLE \"companies\" DROP CONSTRAINT \"companies_assetId_unique\";",
      "\nALTER TABLE \"companies\" ADD CONSTRAINT \"companies_asset_id_unique\" UNIQUE(\"asset_id\");"
    ],
    "bps": true,
    "folderMillis": 1734085692416,
    "hash": "2ccc9c89717f22c4d0a0f70893cff044ef3a712cd683e3f0f1514888e8082fc5"
  }
]